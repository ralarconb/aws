# [Host Your Application On A Web Server](https://aws.amazon.com/es/getting-started/projects/build-modern-app-fargate-lambda-dynamodb-python/module-two/)
- Our mircroservice backend:
  - Python and Flask framework.
  - Docker container.
  - Network Load Balancer.
- AWS Lambda is for serverless computing.
- AWS Fargate is for microservice computing.
## Create resources with AWS CloudFormation
- Set up a VPC.
- 2 public Subnets.
- 2 private Subnets.
- Each Subnet is in its own AZ.
- 2 NAT Gateways to communicate out to the Internet.
- A VPC Endpoint for DynamoDB connection.
- A Security Group to enable incoming traffic from NLB into Docker containers throught port 8080.
- IAM Roles to enable communication between services and resources throught API calls.
```
aws cloudformation create-stack --stack-name MythicalMysfitsCoreStack --capabilities CAPABILITY_NAMED_IAM --template-body file://~/environment/aws-modern-application-workshop/module-2/cfn/core.yml
```
- Check on the status.
```
aws cloudformation describe-stacks --stack-name MythicalMysfitsCoreStack
```
- The above stack must show CREATE_COMPLETE before proceeding on.
- Save the output from the preceding stack running:
```
aws cloudformation describe-stacks --stack-name MythicalMysfitsCoreStack > ~/environment/cloudformation-core-output.json
```
## Create a Docker container image within Cloud9.
```
cd ~/environment/aws-modern-application-workshop/module-2/app
```
- Get the next values from the file cloudformation-core-output.json
  - "Description": "REPLACE_ME_ACCOUNT_ID"
    - "OutputValue": "************"
  - "Description": "REPLACE_ME_REGION"
    - "OutputValue": "*********"
- Replace that values and build a Docker image:
```
docker build . -t REPLACE_ME_ACCOUNT_ID.dkr.ecr.REPLACE_ME_REGION.amazonaws.com/mythicalmysfits/service:latest
```
- Save the image tag.
```
Successfully built 7ed4c8b3fa84
Successfully tagged REPLACE_ME_WITH_DOCKER_IMAGE_TAG
```
- For test purposes, deploy the container locally.
```
docker run -p 8080:8080 REPLACE_ME_WITH_DOCKER_IMAGE_TAG
```
- The result must look like:
```
 * Running on http://0.0.0.0:8080/ (Press CTRL+C to quit)
```
- Select Preview > Preview Running Application
- In the new panel append /mysfits to the end of the URI hit ENTER.
- You will see a response from the service that returns the JSON document stored at.
```
/aws-modern-application-workshop/module-2/app/service/mysfits-response.json
```
- Press CTRL-C in the bash console.
## Push the Docker Image to Amazon Elastic Container Registry (Amazon ECR)
- Create a new repository in your account's defaul AWS ECR registry.
```
aws ecr create-repository --repository-name mythicalmysfits/service
```
